# 儿童任务/上班系统 - 需求文档

## 1. 项目概述

- **项目名称**: 儿童任务/上班系统
- **项目类型**: 纯前端 Web 应用（React）
- **部署平台**: GitHub Pages
- **核心目标**: 为小孩提供一个通过完成任务和上班来挣钱的渠道，家长通过 GitHub 管理数据
- **目标用户**: 多个小孩家庭，家长管理数据

## 2. 功能需求
项目路径 https://github.com/LiangHChao/money.git

### 2.1 数据展示模块

| 功能 | 说明 |
|------|------|
| 总欠款 | 家长为孩子花费记录为欠款，显示累计欠款金额 |
| 总收入 | 孩子通过上班和任务获得的总收入 |
| 收入明细 | 列表展示每笔收入的来源、金额、时间 |
| 欠款明细 | 列表展示每笔欠款的用途、金额、时间 |

### 2.2 上班模式模块

对标工厂上班模式：

| 功能 | 说明 |
|------|------|
| 出勤时间 | 早 8:00 - 晚 11:00 |
| 日薪标准 | 设定每日工资标准（如 50 元/天） |
| 迟到扣款 | 拖延 5 分钟未到岗扣多少钱（如 5 元/次） |
| 扣款规则展示 | 页面显眼位置展示扣钱规则，防止偷懒 |
| 上班记录 | 记录每日上班情况 |

### 2.3 任务模式模块

| 功能 | 说明 |
|------|------|
| 任务发布 | 家长发布任务，设定单价 |
| 任务列表 | 展示可接受的任务 |
| 任务完成 | 孩子完成任务后标记完成 |
| 任务收入 | 完成后计入收入 |

### 2.4 账号系统

- 多小孩支持：每个小孩有独立账号
- 登录方式：简单用户名密码（本地存储）
- 数据隔离：每个小孩只能看到自己的数据
- 家长模式：管理员可查看和管理所有小孩数据

### 2.5 数据管理

- **数据存储**: 使用 GitHub 仓库存储 JSON 数据文件
- **数据编辑**: 在页面添加"在 GitHub 中编辑"按钮，跳转到 GitHub 仓库对应数据文件进行编辑
- **数据文件结构**:
  - `users.json` - 用户账号信息
  - `kids/{kid_id}/income.json` - 收入记录
  - `kids/{kid_id}/debt.json` - 欠款记录
  - `kids/{kid_id}/tasks.json` - 任务记录
  - `kids/{kid_id}/attendance.json` - 上班出勤记录

## 3. 技术架构

### 3.1 技术栈

- **框架**: React 18 + Vite
- **样式**: CSS Modules 或 Tailwind CSS
- **状态管理**: React Context
- **数据请求**: fetch API
- **路由**: React Router v6
- **部署**: GitHub Pages

### 3.2 项目结构

```
money/
├── public/
│   └── data/              # 静态数据文件（GitHub API 读取）
├── src/
│   ├── components/        # 公共组件
│   ├── pages/             # 页面组件
│   │   ├── Login/         # 登录页
│   │   ├── Dashboard/    # 数据展示页
│   │   ├── Work/         # 上班模式页
│   │   ├── Tasks/        # 任务模式页
│   │   └── Admin/        # 家长管理页
│   ├── context/          # React Context
│   ├── hooks/            # 自定义 Hooks
│   ├── utils/            # 工具函数
│   ├── App.jsx
│   └── main.jsx
├── .env                  # GitHub 配置
├── package.json
└── vite.config.js
```

### 3.3 GitHub API 集成

- 使用 GitHub REST API 读取仓库中的数据文件
- 通过 "在 GitHub 中编辑" 按钮跳转到 GitHub 仓库编辑页面
- 读取 token 可选（公开仓库无需认证即可读取）

## 4. 页面设计

### 4.1 登录页
- 用户名输入
- 密码输入（可选，简单验证）
- 角色选择（家长/小孩）

### 4.2 数据展示页（首页）
- 卡片展示：总欠款、总收入
- 列表展示：收入明细、欠款明细
- 快捷入口：上班打卡、任务大厅

### 4.3 上班页
- 当前状态：是否在岗
- 出勤记录列表
- 扣款规则展示（醒目）
- 上班打卡按钮

### 4.4 任务页
- 可接受任务列表
- 进行中任务
- 已完成任务及收入

### 4.5 家长管理页
- 添加/编辑任务
- 记录欠款
- 查看所有孩子数据
- 配置上班规则

## 5. 数据文件示例

### users.json
```json
{
  "kids": [
    {
      "id": "kid1",
      "name": "小明",
      "password": "123456",
      "dailyWage": 50,
      "latePenalty": 5,
      "lateMinutes": 5
    }
  ],
  "admin": {
    "password": "admin123"
  }
}
```

### kids/kid1/income.json
```json
{
  "records": [
    {
      "id": "inc1",
      "type": "work",
      "amount": 50,
      "date": "2024-01-15",
      "note": "全天上班"
    }
  ]
}
```

### kids/kid1/debt.json
```json
{
  "records": [
    {
      "id": "debt1",
      "amount": 100,
      "date": "2024-01-10",
      "note": "买书"
    }
  ]
}
```

## 6. 部署流程

1. 创建 GitHub 仓库
2. 在仓库中创建数据文件
3. 部署 React 应用到 GitHub Pages
4. 配置 `vite.config.js` 中的 base 路径
